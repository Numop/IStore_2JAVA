<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="IStore.controller.DashboardController"
            stylesheets="@../css/styles.css" styleClass="main-container">

    <!-- Header -->
    <top>
        <HBox spacing="20" alignment="CENTER_LEFT" styleClass="header"
              style="-fx-background-color: #1a1a24; -fx-padding: 16 24; -fx-border-color: #252532; -fx-border-width: 0 0 1 0;">
            <Label text="ðŸª" style="-fx-font-size: 24;"/>
            <Text text="iStore" style="-fx-fill: white; -fx-font-size: 20;">
                <font>
                    <Font name="System Bold"/>
                </font>
            </Text>
            <Region HBox.hgrow="ALWAYS"/>
            <VBox alignment="CENTER_RIGHT" spacing="2">
                <Label fx:id="welcomeLabel" text="Bienvenue" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14;"/>
                <Label fx:id="roleLabel" text="RÃ´le" style="-fx-text-fill: #6b7280; -fx-font-size: 11;"/>
            </VBox>
            <Button text="ðŸ‘¤ Profil" onAction="#handleProfile" styleClass="header-button"/>
            <Button text="ðŸšª DÃ©connexion" onAction="#handleLogout" styleClass="danger-button"/>
        </HBox>
    </top>

    <!-- Content -->
    <center>
        <HBox spacing="24" style="-fx-padding: 24;">

            <!-- Sidebar - Menu Admin -->
            <VBox fx:id="adminMenu" spacing="8" prefWidth="220" styleClass="sidebar">
                <Label text="ADMINISTRATION" style="-fx-text-fill: #6b7280; -fx-font-size: 11; -fx-font-weight: bold; -fx-padding: 8 0 12 8;"/>

                <Button fx:id="manageUsersBtn" text="ðŸ‘¥ GÃ©rer les utilisateurs"
                        onAction="#handleManageUsers" styleClass="menu-button" maxWidth="Infinity"/>
                <Button fx:id="manageWhitelistBtn" text="ðŸ“§ Whitelist emails"
                        onAction="#handleManageWhitelist" styleClass="menu-button" maxWidth="Infinity"/>

                <Separator style="-fx-padding: 8 0;"/>

                <Button fx:id="createStoreBtn" text="âž• Nouveau magasin"
                        onAction="#handleCreateStore" styleClass="menu-button" maxWidth="Infinity"/>
            </VBox>

            <!-- Main content - Liste des magasins -->
            <VBox spacing="20" HBox.hgrow="ALWAYS">

                <!-- Header section -->
                <HBox spacing="16" alignment="CENTER_LEFT">
                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                        <Label text="ðŸ¬ Mes Magasins" styleClass="page-title" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: white;"/>
                        <Label text="SÃ©lectionnez un magasin pour gÃ©rer son inventaire" style="-fx-text-fill: #6b7280; -fx-font-size: 13;"/>
                    </VBox>
                    <Button text="ðŸ”„ Actualiser" onAction="#initialize" styleClass="secondary-button"/>
                </HBox>

                <!-- Liste des magasins -->
                <VBox VBox.vgrow="ALWAYS" styleClass="card" style="-fx-padding: 0;">
                    <ListView fx:id="storeListView" VBox.vgrow="ALWAYS"/>
                </VBox>

                <!-- Actions -->
                <HBox spacing="12">
                    <Button text="ðŸ“¦ Ouvrir le magasin" onAction="#handleOpenStore" styleClass="primary-button"/>
                    <Button fx:id="deleteStoreBtn" text="âž– Supprimer" onAction="#handleDeleteStore" styleClass="danger-button"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="ðŸ’¡ Double-cliquez sur un magasin pour l'ouvrir"
                           style="-fx-text-fill: #6b7280; -fx-font-size: 12;"/>
                </HBox>

            </VBox>

        </HBox>
    </center>

</BorderPane>
