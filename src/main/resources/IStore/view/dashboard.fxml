<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="IStore.controller.DashboardController"
            stylesheets="@../css/styles.css" styleClass="main-container">

    <!-- Header -->
    <top>
        <HBox spacing="20" alignment="CENTER_LEFT" styleClass="header"
              style="-fx-background-color: #2c3e50; -fx-padding: 15;">
            <Text text="ðŸª iStore" style="-fx-fill: white;">
                <font>
                    <Font size="24" name="System Bold"/>
                </font>
            </Text>
            <Region HBox.hgrow="ALWAYS"/>
            <VBox alignment="CENTER_RIGHT">
                <Label fx:id="welcomeLabel" text="Bienvenue" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                <Label fx:id="roleLabel" text="RÃ´le" style="-fx-text-fill: #bdc3c7; -fx-font-size: 11;"/>
            </VBox>
            <Button text="Mon profil" onAction="#handleProfile" styleClass="header-button"/>
            <Button text="DÃ©connexion" onAction="#handleLogout" styleClass="danger-button"/>
        </HBox>
    </top>

    <!-- Content -->
    <center>
        <HBox spacing="20" style="-fx-padding: 20;">

            <!-- Sidebar - Menu Admin -->
            <VBox fx:id="adminMenu" spacing="10" prefWidth="200" styleClass="sidebar">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>
                <Label text="Administration" styleClass="section-title" style="-fx-font-weight: bold;"/>
                <Separator/>
                <Button fx:id="manageUsersBtn" text="ðŸ‘¥ GÃ©rer les utilisateurs"
                        onAction="#handleManageUsers" styleClass="menu-button" maxWidth="Infinity"/>
                <Button fx:id="manageWhitelistBtn" text="âœ‰ï¸ Whitelist emails"
                        onAction="#handleManageWhitelist" styleClass="menu-button" maxWidth="Infinity"/>
                <Separator/>
                <Button fx:id="createStoreBtn" text="âž• Nouveau magasin"
                        onAction="#handleCreateStore" styleClass="menu-button" maxWidth="Infinity"/>
            </VBox>

            <!-- Main content - Liste des magasins -->
            <VBox spacing="15" HBox.hgrow="ALWAYS">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Mes Magasins" styleClass="page-title">
                        <font>
                            <Font size="24" name="System Bold"/>
                        </font>
                    </Label>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="ðŸ”„ Actualiser" onAction="#initialize" styleClass="secondary-button"/>
                </HBox>

                <ListView fx:id="storeListView" VBox.vgrow="ALWAYS"
                          style="-fx-background-radius: 5; -fx-border-radius: 5;"/>

                <HBox spacing="10">
                    <Button text="ðŸ“¦ Ouvrir le magasin" onAction="#handleOpenStore" styleClass="primary-button"/>
                    <Button text="ðŸ—‘ï¸ Supprimer" onAction="#handleDeleteStore" styleClass="danger-button"/>
                </HBox>

                <Label text="Double-cliquez sur un magasin pour l'ouvrir"
                       style="-fx-text-fill: #7f8c8d; -fx-font-style: italic;"/>
            </VBox>

        </HBox>
    </center>

</BorderPane>
